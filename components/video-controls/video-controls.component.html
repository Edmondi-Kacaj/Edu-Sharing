<collection-chooser
  class="dialog-right scrollWithBanner"
  *ngIf="chooseCollection"
  [@fromRight]="chooseCollection"
  title="WORKSPACE.SELECT_COLLECTION"
  (onCancel)="chooseCollection=false"
  (onChoose)="addToCollection($event)"
></collection-chooser>
<div *ngIf="_video && node && !isGuest">

  <div id="bar" style.background-image="linear-gradient(to right, transparent {{getProgress()}}%, #555 {{getProgress()}}%)">
    <span class="chapter" *ngFor="let marker of markers"
          [style.width]="(marker.endTime - marker.startTime) / _video.duration * 100 +'%'"
          [style.left]="(marker.startTime / _video.duration) * 100 +'%'" (click)="seek(marker.startTime)">
      <span class='chapterTitle'>{{marker.text}}</span>
    </span>
  </div>
  <div>
    <form class="addChapter">
      <div class="time">
        <mat-form-field>
          <mat-label>{{'START' | translate}}</mat-label>
          <input matInput type="text" name="startTime" id="startTime" [(ngModel)]="_startTime"
                 (click)="_startTime=toHHMMSS(_video.currentTime)">
        </mat-form-field>
      </div>
      <div class="time">
        <mat-form-field>
          <mat-label>{{'STOP' | translate}}</mat-label>
          <input matInput type="text" name="endTime" id="endTime" [(ngModel)]="_endTime"
                 (click)="_endTime=toHHMMSS(_video.currentTime)">
        </mat-form-field>
      </div>
      <div class="title">
        <mat-form-field>
          <mat-label>{{'NODE.cm:title' | translate}}</mat-label>
          <input matInput type="text" name="chapterName" id="chapterName" [(ngModel)]="_title">
        </mat-form-field>
      </div>
      <div class="save">
        <button mat-raised-button color="primary" (click)="updateChapters()" *ngIf="!loading">{{'SAVE' | translate}}</button>
        <spinner-small *ngIf="loading">{{'SAVE' | translate}}</spinner-small>
      </div>
    </form>
  </div>
</div>
