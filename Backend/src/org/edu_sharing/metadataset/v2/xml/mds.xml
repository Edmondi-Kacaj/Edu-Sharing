<metadataset id="default" label="default" hidden="false">
		<name>Core Metadataset</name>
		<i18n>mds</i18n>
		<widgets>
			<widget>
				<id>cm:name</id>
				<caption>cm_name</caption>
				<placeholder>cm_name_placeholder</placeholder>
				<bottomCaption>cm_name_bottom</bottomCaption>
				<icon>description</icon>
				<type>text</type>
				<required>true</required>
				<!-- <condition>!ccm:wwwurl</condition>  -->
			</widget>
			<widget>
				<id>cclom:title</id>
				<caption>cm_title</caption>
				<placeholder>cm_title_placeholder</placeholder>
				<bottomCaption>cm_title_bottom</bottomCaption>
				<type>text</type>
				<hideIfEmpty>true</hideIfEmpty>
				<condition>!ccm:wwwurl</condition>
			</widget>
			<widget>
				<id>cclom:title</id>
				<caption>cm_title_wwwurl</caption>
				<placeholder>cm_title_placeholder</placeholder>
				<type>text</type>
				<condition>ccm:wwwurl</condition>			
			</widget>
			<widget>
				<id>cclom:general_description</id>
				<type>text</type>
				<caption>lom_prop_educational_description</caption>
				<placeholder>lom_prop_educational_description_placeholder</placeholder>
				<hideIfEmpty>true</hideIfEmpty>
			</widget>
			<widget>
				<id>cclom:general_keyword</id>
				<type>multivalueBadges</type>
				<caption>lom_prop_general_keyword</caption>
				<placeholder>lom_prop_general_keyword_placeholder</placeholder>
				<hideIfEmpty>true</hideIfEmpty>
			</widget>
			<widget>
				<id>cclom:general_keyword</id>
				<template>search_suggestions</template>
				<type>multivalueBadges</type>
				<caption>lom_prop_general_keyword_tagcloud</caption>
			</widget>
			<widget>
				<id>cclom:general_keyword</id>
				<type>multivalueBadges</type>
				<caption>lom_prop_general_keyword</caption>
				<template>search</template>
			</widget>
			<widget>
				<id>ccm:author_freetext</id>
				<type>textarea</type>
				<caption>lom_prop_author_freetext</caption>
				<hideIfEmpty>true</hideIfEmpty>
			</widget>
			<widget>
				<id>ccm:lifecyclecontributer_author</id>
				<caption>cb_contr_author</caption>
				<type>vcard</type>
				<icon>person</icon>
				<hideIfEmpty>true</hideIfEmpty>
			</widget>
			<widget>
				<id>ccm:lifecyclecontributer_publisher</id>
				<caption>cb_contr_publisher</caption>
				<type>vcard</type>
				<icon>person</icon>				
				<hideIfEmpty>true</hideIfEmpty>
			</widget>
			<widget>
				<id>ccm:lifecyclecontributer_unknown</id>
				<caption>cb_contr_unknown</caption>
				<type>vcard</type>
				<icon>person</icon>
				<hideIfEmpty>true</hideIfEmpty>
			</widget>
			<widget>
				<id>ccm:lifecyclecontributer_initiator</id>
				<caption>cb_contr_initiator</caption>
				<type>vcard</type>
				<icon>person</icon>
				<hideIfEmpty>true</hideIfEmpty>
			</widget>
			<widget>
				<id>ccm:lifecyclecontributer_terminator</id>
				<caption>cb_contr_terminator</caption>
				<type>vcard</type>
				<icon>person</icon>
				<hideIfEmpty>true</hideIfEmpty>
			</widget>
			<widget>
				<id>ccm:lifecyclecontributer_validator</id>
				<caption>cb_contr_validator</caption>
				<type>vcard</type>
				<icon>person</icon>
				<hideIfEmpty>true</hideIfEmpty>
			</widget>
			<widget>
				<id>ccm:lifecyclecontributer_editor</id>
				<caption>cb_contr_editor</caption>
				<type>vcard</type>
				<icon>person</icon>
				<hideIfEmpty>true</hideIfEmpty>
			</widget>
			<widget>
				<id>ccm:lifecyclecontributer_graphical_designer</id>
				<caption>cb_contr_graphical_designer</caption>
				<type>vcard</type>
				<icon>person</icon>
				<hideIfEmpty>true</hideIfEmpty>
			</widget>
			<widget>
				<id>ccm:lifecyclecontributer_technical_implementer</id>
				<caption>cb_contr_technical_implementer</caption>
				<type>vcard</type>
				<icon>person</icon>
				<hideIfEmpty>true</hideIfEmpty>
			</widget>
			<widget>
				<id>ccm:lifecyclecontributer_content_provider</id>
				<caption>cb_contr_content_provider</caption>
				<type>vcard</type>
				<icon>person</icon>
				<hideIfEmpty>true</hideIfEmpty>
			</widget>
			<widget>
				<id>ccm:lifecyclecontributer_educational_validator</id>
				<caption>cb_contr_educational_validator</caption>
				<type>vcard</type>
				<icon>person</icon>
				<hideIfEmpty>true</hideIfEmpty>
			</widget>
			<widget>
				<id>ccm:lifecyclecontributer_script_writer</id>
				<caption>cb_contr_script_writer</caption>
				<type>vcard</type>
				<icon>person</icon>
				<hideIfEmpty>true</hideIfEmpty>
			</widget>
			<widget>
				<id>ccm:lifecyclecontributer_instructional_designer</id>
				<caption>cb_contr_instructional_designer</caption>
				<type>vcard</type>
				<icon>person</icon>
				<hideIfEmpty>true</hideIfEmpty>
			</widget>
			<widget>
				<id>ccm:lifecyclecontributer_subject_matter_expert</id>
				<caption>cb_contr_subject_matter_expert</caption>
				<type>vcard</type>
				<icon>person</icon>
				<hideIfEmpty>true</hideIfEmpty>
			</widget>
			<widget>
				<id>ccm:metadatacontributer_creator</id>
				<caption>cb_contr_creator</caption>
				<type>vcard</type>
				<icon>person</icon>
				<hideIfEmpty>true</hideIfEmpty>
			</widget>
			<widget>
				<id>ccm:metadatacontributer_validator</id>
				<caption>cb_contr_validator</caption>
				<type>vcard</type>
				<icon>person</icon>
				<hideIfEmpty>true</hideIfEmpty>
			</widget>
			<widget>
				<id>ccm:metadatacontributer_provider</id>
				<caption>cb_contr_provider</caption>
				<type>vcard</type>
				<icon>person</icon>
				<hideIfEmpty>true</hideIfEmpty>
			</widget>
			<widget>
				<id>cm:created</id>
				<caption>cm_prop_created</caption>
				<type>date</type>
			</widget>
			<widget>
				<id>cm:modified</id>
				<caption>cm_prop_modified</caption>
				<type>date</type>
			</widget>
			<widget>
				<id>license</id>
				<caption>ccm_prop_io_license</caption>
			</widget>
			<widget>
				<id>sys:node-uuid</id>
				<caption>lom_prop_general_identifier</caption>
				<type>text</type>
			</widget>
			<widget>
				<id>cclom:size</id>
				<caption>lom_prop_size</caption>
				<type>filesize</type>
			</widget>
		</widgets>
		<templates>
			<template>
				<id>node_general</id>
				<caption>dialog_upload_tab_basic</caption>
				<icon>description</icon>
				<html><![CDATA[
			  <preview>
              <cm:name>
              <cclom:title>
              <cclom:general_keyword>
              <cclom:general_description>
              <author>
              <license>
              <version>
				]]></html>
			</template>
			<template>
				<id>node_map</id>
				<caption>dialog_upload_tab_basic</caption>
				<icon>description</icon>
				<html><![CDATA[
			  <preview>
              <cm:name>
				]]></html>
			</template>
			<template>
				<id>search</id>
				<html><![CDATA[
              <cclom:general_keyword>
				]]></html>
			</template>
			<template>
				<id>search_suggestions</id>
				<rel>suggestions</rel>
				<html><![CDATA[
              <cclom:general_keyword>
				]]></html>
			</template>
			<template>
				<id>node_general_render</id>
				<caption>dialog_upload_tab_basic</caption>
				<html><![CDATA[
              <cclom:title>
              <cm:name>
              <cclom:general_keyword>
              
              <license>
              <ccm:author_freetext>
              <cclom:general_description>
              <cclom:size>
              <cm:created>
              <cm:modified>
              <sys:node-uuid>
				]]></html>
			</template>
			<template>
				<id>node_contributor_render</id>
				<caption>dialog_upload_tab_contributers</caption>
				<html><![CDATA[
				<div class="mdsContributorGroup mdsWidgetCaption">
					<div class="mdsLifecyclecontributorsTitle mdsContributorTitle">{{ cb_contr_material }}</div>
					<div class="mdsLifecyclecontributors">
	               		<ccm:lifecyclecontributer_author>
	               		<ccm:lifecyclecontributer_publisher>
	               		<ccm:lifecyclecontributer_unknown>
	               		<ccm:lifecyclecontributer_initiator>
	               		<ccm:lifecyclecontributer_terminator>
	               		<ccm:lifecyclecontributer_validator>
	               		<ccm:lifecyclecontributer_editor>
	               		<ccm:lifecyclecontributer_graphical_designer>
	               		<ccm:lifecyclecontributer_technical_implementer>
	               		<ccm:lifecyclecontributer_content_provider>
	               		<ccm:lifecyclecontributer_educational_validator>
	               		<ccm:lifecyclecontributer_script_writer>
	               		<ccm:lifecyclecontributer_instructional_designer>
	               		<ccm:lifecyclecontributer_subject_matter_expert>
               		</div>
               		<div class="mdsMetadatcontributorsTitle mdsContributorTitle">{{ cb_contr_metadata }}</div>
               		<div class="mdsMetadatcontributors">
	               		<ccm:metadatacontributer_creator>
	               		<ccm:metadatacontributer_validator>
	               		<ccm:metadatacontributer_provider>
	               	</div>
               	</div>
               	<script>
               		function hideIfEmpty(toHide,isEmpty){
               			for(var i=0;i<toHide.length;i++){
               				if(isEmpty[i].innerHTML.trim()==""){
               					toHide[i].style.display='none';
               				}
               			}
               		}
               		var lifecycle=document.getElementsByClassName("mdsLifecyclecontributors");
               		var metadata=document.getElementsByClassName("mdsMetadatcontributors");
               		
               		var group=document.getElementsByClassName("node_contributor_render");
               		hideIfEmpty(document.getElementsByClassName("mdsLifecyclecontributorsTitle"),lifecycle);
               		hideIfEmpty(document.getElementsByClassName("mdsMetadatcontributorsTitle"),metadata);
               		for(var i=0;i<lifecycle.length;i++){
               			if(lifecycle[i].innerHTML.trim()+metadata[i].innerHTML.trim()==""){
               				group[i].style.display='none';
               			}
               		}
               	</script>
				]]></html>
			</template>
		</templates>
		<groups>
			<group>
				<id>io</id>
				<views>
					<view>node_general</view>
				</views>
			</group>
			<group>
				<id>io_render</id>
				<views>
					<view>node_general_render</view>
					<view>node_contributor_render</view>
				</views>
			</group>
			<group>
				<id>map</id>
				<views>
					<view>node_map</view>
				</views>
			</group>
			<group>
				<id>ngsearch</id>
				<views>
					<view>search</view>
					<view>search_suggestions</view>
				</views>
			</group>
		</groups>
		<lists>
			<list>
				<id>search</id>
				<columns>
					<column>cm:title</column>
					<column>cm:modified</column>
					<column>ccm:commonlicense_key</column>
					<column>ccm:replicationsource</column>
				</columns>
			</list>
		</lists>
		<queries>
			<basequery>-TYPE:"ccm:toolpermission" AND NOT @cm\:name:"._*" AND NOT @cm\:name:".DS_Store*"</basequery>
			<allowSearchWithoutCriteria>true</allowSearchWithoutCriteria>
			
			<query join="AND"  id="ngsearch">
				<property name="ngsearchword">
					<statement>(@sys\:node-uuid:"${value}" OR TEXT:"${value}" OR @cm\:name:"*${value}*" OR @cclom\:title:"*${value}*" OR @cclom\:general_description:"*${value}*" OR @cclom\:general_keyword:"*${value}*" OR @ccm\:taxonentry:"*${value}*" OR @ccm\:classification_keyword:"*${value}*" OR @ccm\:educationallearningresourcetype:"*${value}*" OR @ccm\:educationalcontext:"*${value}*" OR @ccm\:learninggoal:"*${value}*" OR @ccm\:guidanceteachers:"*${value}*" OR @ccm\:guidancestudents:"*${value}*")</statement>
					<multiple>true</multiple>
					<multiplejoin>AND</multiplejoin>
				</property>
				<property name="cclom:general_keyword">
					<statement>@cclom\:general_keyword:"${value}"</statement>
					<multiple>true</multiple>
					<multiplejoin>AND</multiplejoin>
					<source>search|mds|db</source>
				</property>
				<property name="ccm:classification_purpose" />
				<property name="ccm:commonlicense_key" />
				<property name="ccm:educationallearningresourcetype" />
			</query>
			<query join="AND"  id="workspace">
				<property name="ngsearchword">
					<statement>NOT ASPECT:"ccm:collection_io_reference" AND (@sys\:node-uuid:"${value}" OR TEXT:"${value}" OR @cm\:name:"*${value}*" OR @cclom\:title:"*${value}*" OR @cclom\:general_description:"*${value}*" OR @cclom\:general_keyword:"*${value}*" OR @ccm\:taxonentry:"*${value}*" OR @ccm\:classification_keyword:"*${value}*" OR @ccm\:educationallearningresourcetype:"*${value}*" OR @ccm\:educationalcontext:"*${value}*" OR @ccm\:learninggoal:"*${value}*" OR @ccm\:guidanceteachers:"*${value}*" OR @ccm\:guidancestudents:"*${value}*")</statement>
					<multiple>true</multiple>
					<multiplejoin>AND</multiplejoin>
				</property>
			</query>
		</queries>
</metadataset>