<global-progress *ngIf="isLoading"></global-progress>
<div class="appLogin" *ngIf="!isLoading">
  <!--------------------
     STATE: LOGIN 
    ------------------- -->
  <div *ngIf="state==1">
    <div class="infoTop" style="margin-top: -10px;">
      <h1>{{'LOGIN_APP.LOGIN' | translate}}</h1>
      <div>{{'LOGIN_APP.LOGIN_INFO' | translate}}</div>
    </div>
    <card [modal]="false" title="{{'LOGIN_APP.LOGIN_TITLE' | translate}}" width="normal" height="auto" avatar="assets/images/app-icon.svg" [isCancelable]="true" (onCancel)="buttonLoginBack()" [buttons]="buttons">
        <div class="card-content-padding">
          <form (ngSubmit)="login()" #loginForm>
            <mat-form-field>
              <mat-label>{{'LOGIN.USERNAME' | translate}}</mat-label>
              <input matInput required autofocus name="username" id="username" (ngModelChange)="checkConditions()" [(ngModel)]="username"/>
            </mat-form-field>
            <div>
              <input-password label="{{'LOGIN.PASSWORD' | translate}}" id="password" required (valueChange)="checkConditions()" (keydown.enter)="login()" [(value)]="password"></input-password>
            </div>
          </form>
          <div class="register" *ngIf="config.register.local || config.register.registerUrl">
            {{'LOGIN.REGISTER_TEXT' | translate}}
            <button mat-button color="primary" (click)="register()">{{'LOGIN.REGISTER_LINK' | translate}} <i icon iconId="arrow_forward"></i></button>
          </div>
        </div>
    </card>
</div>

    <!--------------------
       STATE: NO INTERNET
      ------------------- -->
    <div *ngIf="state==3">
        <div class="infoTop" style="margin-top: -10px;">
            <h1>{{'LOGIN_APP.NOTINTERNET' | translate }}</h1>
            <div>{{'LOGIN_APP.NOTINTERNET_SUB' | translate }}</div>
        </div>
        <div class="card center-card card-action">
            <div class="card-content">
                <div class="card-title"><i class="material-icons card-title-back">warning</i>
                    {{'LOGIN_APP.NOTINTERNET_INFO' | translate }}
                </div>
                <div class="card-scroll">
                    {{'LOGIN_APP.NOTINTERNET_TEXT' | translate }}
                </div>
            </div>
            <div class="card-action">
                <a class="waves-effect waves-light btn" (click)="init()">{{'LOGIN_APP.NOTINTERNET_RETRY' | translate }}</a>
                <a class="btn-flat" (click)="buttonExitApp()">{{'LOGIN_APP.NOTINTERNET_EXIT' | translate }}</a>
            </div>
        </div>
    </div>
</div>